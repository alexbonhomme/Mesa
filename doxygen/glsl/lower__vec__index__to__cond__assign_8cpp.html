<html>
<head>
<title>Mesa Source Code Documentation</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head>
<body>
<div class="qindex">
<a class="qindex" href="../main/index.html">core</a> |
<a class="qindex" href="../glapi/index.html">glapi</a> |
<a class="qindex" href="../glsl/index.html">glsl</a> |
<a class="qindex" href="../vbo/index.html">vbo</a> |
<a class="qindex" href="../math/index.html">math</a> |
<a class="qindex" href="../shader/index.html">shader</a> |
<a class="qindex" href="../swrast/index.html">swrast</a> |
<a class="qindex" href="../swrast_setup/index.html">swrast_setup</a> |
<a class="qindex" href="../tnl/index.html">tnl</a> |
<a class="qindex" href="../tnl_dd/index.html">tnl_dd</a> |
<a class="qindex" href="../gbm/index.html">gbm</a>
</div>
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_9d873dbfec6053c8a46a8bdca18df976.html">glsl</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">lower_vec_index_to_cond_assign.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Turns indexing into vector types to a series of conditional moves of each channel's swizzle into a temporary.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="ir_8h.html">ir.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="ir__visitor_8h.html">ir_visitor.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="ir__optimization_8h.html">ir_optimization.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="glsl__types_8h.html">glsl_types.h</a>&quot;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for lower_vec_index_to_cond_assign.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="lower__vec__index__to__cond__assign_8cpp__incl.png" border="0" usemap="#lower__vec__index__to__cond__assign_8cpp" alt=""/></div>
<map name="lower__vec__index__to__cond__assign_8cpp" id="lower__vec__index__to__cond__assign_8cpp">
<area shape="rect" id="node3" href="ir_8h.html" title="ir.h" alt="" coords="408,96,448,123"/><area shape="rect" id="node19" href="glsl__types_8h.html" title="glsl_types.h" alt="" coords="534,171,625,197"/><area shape="rect" id="node32" href="ir__visitor_8h.html" title="ir_visitor.h" alt="" coords="651,171,733,197"/><area shape="rect" id="node38" href="ir__optimization_8h.html" title="Prototypes for optimization passes to be called by the compiler and drivers." alt="" coords="668,96,785,123"/><area shape="rect" id="node9" href="ralloc_8h.html" title="ralloc: a recursive memory allocator" alt="" coords="249,245,313,272"/><area shape="rect" id="node27" href="list_8h.html" title="Doubly&#45;linked list abstract container type." alt="" coords="323,171,373,197"/><area shape="rect" id="node34" href="ir__hierarchical__visitor_8h.html" title="ir_hierarchical_visitor.h" alt="" coords="5,171,160,197"/></map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classir__vec__index__to__cond__assign__visitor.html">ir_vec_index_to_cond_assign_visitor</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Visitor class for replacing expressions with <a class="el" href="classir__constant.html">ir_constant</a> values.  <a href="classir__vec__index__to__cond__assign__visitor.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ab2d98651e324895d452c55efe21300a4"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="lower__vec__index__to__cond__assign_8cpp.html#ab2d98651e324895d452c55efe21300a4">do_vec_index_to_cond_assign</a> (<a class="el" href="structexec__list.html">exec_list</a> *instructions)</td></tr>
<tr class="separator:ab2d98651e324895d452c55efe21300a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Turns indexing into vector types to a series of conditional moves of each channel's swizzle into a temporary. </p>
<p>Most GPUs don't have a native way to do this operation, and this works around that. For drivers using both this pass and ir_vec_index_to_swizzle, there's a risk that this pass will happen before sufficient constant folding to find that the array index is constant. However, we hope that other optimization passes, particularly constant folding of assignment conditions and copy propagation, will result in the same code in the end. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ab2d98651e324895d452c55efe21300a4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool do_vec_index_to_cond_assign </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structexec__list.html">exec_list</a> *&#160;</td>
          <td class="paramname"><em>instructions</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>References <a class="el" href="classir__vec__index__to__cond__assign__visitor.html#ade6bb53d12ea895e110b09e94b1880da">ir_vec_index_to_cond_assign_visitor::progress</a>, and <a class="el" href="ir__hierarchical__visitor_8h.html#a3d916e3fe1319c5d975084a1c412aa37">visit_list_elements()</a>.</p>

<p>Referenced by <a class="el" href="test__optpass_8cpp.html#a8a19eefda8984dbd5d14e58acb3c3189">do_optimization()</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="lower__vec__index__to__cond__assign_8cpp_ab2d98651e324895d452c55efe21300a4_cgraph.png" border="0" usemap="#lower__vec__index__to__cond__assign_8cpp_ab2d98651e324895d452c55efe21300a4_cgraph" alt=""/></div>
<map name="lower__vec__index__to__cond__assign_8cpp_ab2d98651e324895d452c55efe21300a4_cgraph" id="lower__vec__index__to__cond__assign_8cpp_ab2d98651e324895d452c55efe21300a4_cgraph">
<area shape="rect" id="node3" href="ir__hierarchical__visitor_8h.html#a3d916e3fe1319c5d975084a1c412aa37" title="Process a list of nodes using a hierarchical vistor." alt="" coords="208,12,339,39"/><area shape="rect" id="node5" href="classir__instruction.html#aa797356958ce35850f057499c48a572c" title="ir_instruction::accept" alt="" coords="387,12,530,39"/></map>
</div>
</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.3.1
</small></address>
</body>
</html>
